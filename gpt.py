#!/usr/bin/env python3

from __future__ import annotations

import ast
import os
import json
import datetime

from yandex_cloud_ml_sdk import YCloudML
from dotenv import load_dotenv

load_dotenv()

AUTH_TOKEN = os.getenv('AUTH_TOKEN')
FOLDER_ID = os.getenv('FOLDER_ID')

sdk = YCloudML(
    folder_id=FOLDER_ID,
    auth=AUTH_TOKEN,
)

async def check_duration_and_deadline_gpt(text):
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—Å—Ç –≤–∞–∫–∞–Ω—Å–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç '–î–ê', –µ—Å–ª–∏ –µ–µ –Ω—É–∂–Ω–æ –æ—Ç—Å–µ—á—å –ø–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    –∏–ª–∏ –¥–µ–¥–ª–∞–π–Ω—É, –∏ '–ù–ï–¢' –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ.
    """
    current_date = datetime.date.today().strftime("%d.%m.%Y")
    messages = [
        {
            "role": "system",
            "text": f"""
            –ü—Ä–æ–≤–µ—Ä—å —Ç–µ–∫—Å—Ç –≤–∞–∫–∞–Ω—Å–∏–∏ –∏ –æ–ø—Ä–µ–¥–µ–ª–∏, –Ω—É–∂–Ω–æ –ª–∏ –æ—Ç—Å–µ—á—å –µ—ë. –†–∞–±–æ—Ç–∞–π —Å—Ç—Ä–æ–≥–æ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –Ω–∏–∂–µ.
            –ò—Å–ø–æ–ª—å–∑—É–π –ª–æ–≥–∏–∫—É –ò–õ–ò (OR) –º–µ–∂–¥—É –ø—Ä–∞–≤–∏–ª–∞–º–∏.

            –ü—Ä–∞–≤–∏–ª–æ 1 (–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å): –û—Ç—Å–µ—á—å, –µ—Å–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ —Ä–∞–≤–Ω–∞ –∏–ª–∏ –±–æ–ª–µ–µ 4 –º–µ—Å—è—Ü–∞–º. –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ –±–æ–ª–µ–µ 3 –º–µ—Å—è—Ü–µ–≤, —Ç–æ –≤ —Ä–∞–º–∫–∞—Ö —ç—Ç–æ–≥–æ –ø—Ä–æ–º—Ç–∞ –±—É–¥–µ–º —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –º–µ–Ω–µ–µ 4-—Ö –º–µ—Å—è—Ü–µ–≤.
            –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è –æ—Ç—Å–µ–≤–∞: "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ (–æ—Ç 3—Ö –º–µ—Å—è—Ü–µ–≤): 3 –º–µ—Å—è—Ü–∞", "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ (–æ—Ç 3—Ö –º–µ—Å—è—Ü–µ–≤): 1 –º–µ—Å—è—Ü —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–¥–ª–µ–Ω–∏—è", "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ (–æ—Ç 3—Ö –º–µ—Å—è—Ü–µ–≤): 2 –º–µ—Å—è—Ü–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–¥–ª–µ–Ω–∏—è", "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ (–æ—Ç 3—Ö –º–µ—Å—è—Ü–µ–≤):1 –º–µ—Å", "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ (–æ—Ç 3—Ö –º–µ—Å—è—Ü–µ–≤):3 –º–µ—Å", "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ (–æ—Ç 3—Ö –º–µ—Å—è—Ü–µ–≤):–æ—Ç 3 –º–µ—Å", "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ (–æ—Ç 3—Ö –º–µ—Å—è—Ü–µ–≤): –æ—Ç 3—Ö –º–µ—Å—è—Ü–µ–≤", "3+ –º–µ—Å" –∏ —Ç.–ø.
            –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞: "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ (–æ—Ç 3—Ö –º–µ—Å—è—Ü–µ–≤):4 –º–µ—Å", "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ (–æ—Ç 3—Ö –º–µ—Å—è—Ü–µ–≤): –æ—Ç 6 –º–µ—Å", "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ (–æ—Ç 3—Ö –º–µ—Å—è—Ü–µ–≤):6+ –º–µ—Å" –∏ —Ç.–ø.

            –ü—Ä–∞–≤–∏–ª–æ 2 (–î–µ–¥–ª–∞–π–Ω): –û—Ç—Å–µ—á—å, –µ—Å–ª–∏ –¥–µ–¥–ª–∞–π–Ω –≤ –ø—Ä–æ—à–ª–æ–º –∏–ª–∏ —Å–µ–≥–æ–¥–Ω—è. –°–µ–≥–æ–¥–Ω—è—à–Ω—è—è –¥–∞—Ç–∞: {current_date}.

            –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç—Å–µ—á—å —Ö–æ—Ç—è –±—ã –ø–æ –æ–¥–Ω–æ–º—É –∏–∑ –ø—Ä–∞–≤–∏–ª, –≤–µ—Ä–Ω–∏ —Å–ª–æ–≤–æ "–î–ê". –ï—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–æ –æ—Ç—Å–µ—á—å, –≤–µ—Ä–Ω–∏ —Å–ª–æ–≤–æ "–ù–ï–¢". –ù–µ –¥–æ–±–∞–≤–ª—è–π –Ω–∏–∫–∞–∫–∏—Ö –¥—Ä—É–≥–∏—Ö —Å–ª–æ–≤ –∏ –∑–Ω–∞–∫–æ–≤.
            """
        },
        {
            "role": "user",
            "text": text,
        },
    ]

    try:
        result = (sdk.models.completions("yandexgpt").configure(temperature=0.1).run_deferred(messages, timeout=60)).wait()
        return result.alternatives[0].text.strip()
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ: {e}")
        return "–ù–ï–¢"

async def del_contacts_gpt(text):
    """
    –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ –≤–∞–∫–∞–Ω—Å–∏–∏.
    –í—ã–ø–æ–ª–Ω—è–µ—Ç –æ—á–∏—Å—Ç–∫—É, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.
    """
    messages = [
        {
            "role": "system",
            "text": """
            –¢—ã ‚Äî —Ñ–∏–ª—å—Ç—Ä –≤–∞–∫–∞–Ω—Å–∏–π.
–ù–∞ –≤—Ö–æ–¥ —Ç–µ–±–µ –¥–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç –≤–∞–∫–∞–Ω—Å–∏–∏.
–¢–≤–æ—è –∑–∞–¥–∞—á–∞:

–û–ø—Ä–µ–¥–µ–ª–∏, –ø—Ä–æ—Ö–æ–¥–∏—Ç –ª–∏ –≤–∞–∫–∞–Ω—Å–∏—è –ø–æ –≤—Å–µ–º –ø—Ä–∞–≤–∏–ª–∞–º:

–õ–æ–∫–∞—Ü–∏—è:

‚úÖ –ü—Ä–æ—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ:

"–†–ë"

"–†–ë" –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å—Ç—Ä–∞–Ω–∞–º–∏

"–î—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã" (–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω, –ê—Ä–º–µ–Ω–∏—è, –ö–∏—Ä–≥–∏–∑–∏—è, –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω, –ë–µ–ª–∞—Ä—É—Å—å)

"–õ—é–±—ã–µ" –∏–ª–∏ "–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π"

‚ùå –û—Ç—Å–µ–∫–∞–µ—Ç—Å—è, –µ—Å–ª–∏:

–£–∫–∞–∑–∞–Ω–∞ —Ç–æ–ª—å–∫–æ "–†–§" –∏–ª–∏ '–†–æ—Å—Å–∏—è'

–ü–µ—Ä–µ—á–µ–Ω—å —Å—Ç—Ä–∞–Ω, –Ω–µ –≤–∫–ª—é—á–∞—é—â–∏–π –†–ë

–£–∫–∞–∑–∞–Ω–æ "–∫—Ä–æ–º–µ –†–ë"

–ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ:

‚úÖ –ü—Ä–æ—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ:

"–†–ë"

"–†–§"

"–î—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã" (–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω, –ê—Ä–º–µ–Ω–∏—è, –ö–∏—Ä–≥–∏–∑–∏—è, –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω, –ë–µ–ª–∞—Ä—É—Å—å)

"–õ—é–±—ã–µ" –∏–ª–∏ "–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π"

"–ë–µ–∑ —Ä–∞–∑–Ω–∏—Ü—ã"

‚ùå –û—Ç—Å–µ–∫–∞–µ—Ç—Å—è, –µ—Å–ª–∏:

–£–∫–∞–∑–∞–Ω—ã –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã

–£–∫–∞–∑–∞–Ω–æ "–∫—Ä–æ–º–µ –†–ë"

–£—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã:

‚ùå –ï—Å–ª–∏ —É—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã –ø—Ä–µ–≤—ã—à–∞—é—Ç: 35 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π –∏–ª–∏ 50 –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã—Ö –¥–Ω–µ–π –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –∑–∞–ø–∏—Å—å "–∞–∫—Ç—ã –ø–æ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ" –∏–ª–∏ "–ø–æ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ–µ –∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ" –∏–ª–∏ "–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ–µ –∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ" –∏–ª–∏ '–ø–æ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞' –∏–ª–∏ "–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ", –≤–∞–∫–∞–Ω—Å–∏—è –æ—Ç—Å–µ–∫–∞–µ—Ç—Å—è.

‚ùå –ï—Å–ª–∏ –≤ —Ç–µ–∫—Å—Ç–µ –µ—Å—Ç—å —Å–ª–æ–≤–æ '—Å—Ç–æ–ø' –∏–ª–∏ "–°–¢–û–ü" —Ç–æ –≤–∞–∫–∞–Ω—Å–∏—è –æ—Ç—Å–µ–∫–∞–µ—Ç—Å—è.

–ï—Å–ª–∏ –≤ —Ç–µ–∫—Å—Ç–µ –µ—Å—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ –∏ –µ—Å–ª–∏ –æ–Ω–∞ –º–µ–Ω—å—à–µ —Ç—Ä–µ—Ö –º–µ—Å—è—Ü–µ–≤, –≤–∞–∫–∞–Ω—Å–∏—è –æ—Ç—Å–µ–∫–∞–µ—Ç—Å—è

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç–µ–∫—Å—Ç –≤–∞–∫–∞–Ω—Å–∏–∏ –∏ –Ω–∞–π–¥–∏ –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å—Ä–æ–∫–æ–≤ –ø–æ–¥–∞—á–∏ —Ä–µ–∑—é–º–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "–¥–æ DD.MM.YYYY" –∏–ª–∏ "–¥–æ DD.MM.YYYY HH:MM".  

1. –ï—Å–ª–∏ –¥–∞—Ç–∞ —É–∂–µ –ø—Ä–æ—à–ª–∞ –∏–ª–∏ —Ä–∞–≤–Ω–∞ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç–µ, –ø—Ä–æ–ø—É—Å—Ç–∏ —ç—Ç—É –≤–∞–∫–∞–Ω—Å–∏—é (–Ω–µ –¥–æ–±–∞–≤–ª—è–π –µ—ë –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç).  
2. –ï—Å–ª–∏ –¥–∞—Ç–∞ –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª–∞, –¥–æ–±–∞–≤—å –µ—ë –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π —Å–ª–æ–≤–∞—Ä—å –ø–æ–¥ –∫–ª—é—á "deadline_date".  
3. –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ –≤—Ä–µ–º—è, –¥–æ–±–∞–≤—å –µ–≥–æ –ø–æ–¥ –∫–ª—é—á "deadline_time" (–µ—Å–ª–∏ –µ—Å—Ç—å).  
4. –û—Å—Ç–∞–ª—å–Ω–æ–π —Ç–µ–∫—Å—Ç –≤–∞–∫–∞–Ω—Å–∏–∏ –æ—Å—Ç–∞–≤—å –∫–∞–∫ –µ—Å—Ç—å.  




–ï—Å–ª–∏ –≤–∞–∫–∞–Ω—Å–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç, –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–± —É—Å–ª–æ–≤–∏—è—Ö –æ–ø–ª–∞—Ç—ã.

–ï—Å–ª–∏ –≤–∞–∫–∞–Ω—Å–∏—è –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç —Ö–æ—Ç—è –±—ã –ø–æ –æ–¥–Ω–æ–º—É –ø—Ä–∞–≤–∏–ª—É ‚Üí –≤–µ—Ä–Ω–∏ None.

–ï—Å–ª–∏ –≤–∞–∫–∞–Ω—Å–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç:

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è. –ù–∞–π–¥–∏ –≤—Å–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∏ –≤–∏–¥–∞:
"–í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è ‚û°Ô∏è@username –∏–ª–∏ –≤ –æ–±—â–∏–π —á–∞—Ç. –£–∫–∞–∑–∞—Ç—å üÜî –∑–∞–ø—Ä–æ—Å–∞."
–∏ –∑–∞–º–µ–Ω–∏ –∏—Ö –Ω–∞:
"–í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–∏—à–∏—Ç–µ –î–º–∏—Ç—Ä–∏—é ‚û°Ô∏è@Dimitryver. –£–∫–∞–∑–∞—Ç—å üÜî –∑–∞–ø—Ä–æ—Å–∞.".
–£—á—Ç–∏, —á—Ç–æ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–∏–º–≤–æ–ª üÜî –º–æ–≥—É—Ç –±—ã—Ç—å –ª—é–±—ã–º–∏.

–£–¥–∞–ª–∏ –≤—Å–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã (email, —Ç–µ–ª–µ—Ñ–æ–Ω, —Å—Å—ã–ª–∫–∏, —Ç–µ–ª–µ–≥—Ä–∞–º).



–ï—Å–ª–∏ –≤ –Ω–∞—á–∞–ª–µ —Ç–µ–∫—Å—Ç–∞ –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∞, –ø–æ—Ö–æ–∂–∞—è –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤–∞–∫–∞–Ω—Å–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "ü•á Java —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ c Camunda"), —É–¥–∞–ª–∏ –µ—ë –∏–∑ —Ç–µ–∫—Å—Ç–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª—é—á "vacancy_title".

"vacancy_title" ‚Äî —Å—Ç—Ä–æ–∫–∞ –±–µ–∑ —ç–º–æ–¥–∑–∏ –∏ –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤, —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏.

–ù–∞–π–¥–∏ –≤ —Ç–µ–∫—Å—Ç–µ –ø–µ—Ä–≤—ã–π –≤—Å—Ç—Ä–µ—á–µ–Ω–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–∞–∫–∞–Ω—Å–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫:

1. üÜî + –ø—Ä–æ–±–µ–ª + –∫–æ–¥ —Ñ–æ—Ä–º–∞—Ç–∞ XX-1234 (–≥–¥–µ XX ‚Äî –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã –≤ –≤–µ—Ä—Ö–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ, –∞ 1234 ‚Äî —Ü–∏—Ñ—Ä—ã)
2. üÜî + –ø—Ä–æ–±–µ–ª + —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: üÜî 8581)

–ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:
- –£–¥–∞–ª–∏ –µ–≥–æ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –∏ –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã –≤–æ–∫—Ä—É–≥.
- –í–µ—Ä–Ω–∏ –µ–≥–æ —Ü–µ–ª–∏–∫–æ–º (–±—É–∫–≤—ã + —Ü–∏—Ñ—Ä—ã –∏–ª–∏ —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã) –≤ –∫–ª—é—á "vacancy_id", –Ω–æ –±–µ–∑ —Å–∏–º–≤–æ–ª–∞ üÜî.
- –ï—Å–ª–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –Ω–µ—Ç ‚Äî –≤–µ—Ä–Ω–∏ "vacancy_id": null.

‚ö† –í –æ—á–∏—â–µ–Ω–Ω–æ–º —Ç–µ–∫—Å—Ç–µ ("text") –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–π –≤—Å–µ –∏—Å—Ö–æ–¥–Ω—ã–µ –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ –∏ –∞–±–∑–∞—Ü—ã.


–û–ø—Ä–µ–¥–µ–ª–∏ —Å—Ç–∞–≤–∫—É (—Å—É–º–º—É –æ–ø–ª–∞—Ç—ã –∏–ª–∏ –¥–∏–∞–ø–∞–∑–æ–Ω) –∏ —Å–æ—Ö—Ä–∞–Ω–∏ –µ—ë –∫–∞–∫ —Å—Ç—Ä–æ–∫—É.–ï—Å–ª–∏ –≤ —Ç–µ–∫—Å—Ç–µ —É–∫–∞–∑–∞–Ω—ã –¥–≤–µ —Å—Ç–∞–≤–∫–∏ ‚Äî –¥–ª—è –†–§ –∏ –¥–ª—è –Ω–µ –†–§ ‚Äî –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π —Å—Ç–∞–≤–∫—É –¥–ª—è –Ω–µ –†–§.
–ü—Ä–∏–º–µ—Ä:
–°—Ç–∞–≤–∫–∞ –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –†–§ 3517 / –°—Ç–∞–≤–∫–∞ –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –Ω–µ –†–§ 3120
‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 3120.
–û–±—ã—á–Ω–æ —Å—Ç–∞–≤–∫–∞ –ø–∏—à–µ—Ç—Å—è —Ç–∞–∫ : '–°—Ç–∞–≤–∫–∞ –∑–∞–∫—É–ø–∫–∏' –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏ –ø–æ—Ö–æ–∂–µ–µ –ø–æ —Å–º—ã—Å–ª—É 
–ï—Å–ª–∏ —Å—Ç–∞–≤–∫–∞ —É–∫–∞–∑–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–π –µ—ë.
–í–æ–∑–≤—Ä–∞—â–∞–π —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ, –±–µ–∑ –≤–∞–ª—é—Ç, —Å–ª–æ–≤, –∑–Ω–∞–∫–æ–≤ /, –æ—Ç, ~ –∏ —Ç.–ø.
–£–¥–∞–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞

–ù–µ –≤—ã–¥—É–º—ã–≤–∞–π –¥–∞–Ω–Ω—ã–µ. –ï—Å–ª–∏ —Å—Ç–∞–≤–∫–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ –∏–ª–∏ –Ω–∞–ø–∏—Å–∞–Ω–æ –Ω–∞–ø—Ä–∏–º–µ—Ä "–°–º–æ—Ç—Ä–∏–º –≤–∞—à—É" —Ç–æ –≤–µ—Ä–Ω–∏ "rate": 0

–í –æ—á–∏—â–µ–Ω–Ω–æ–º —Ç–µ–∫—Å—Ç–µ ("text") –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–π –≤—Å–µ –∏—Å—Ö–æ–¥–Ω—ã–µ –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫, –∞–±–∑–∞—Ü—ã –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤–∫–ª—é—á–∞—è –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏.  
–ù–µ –∏–∑–º–µ–Ω—è–π –ø–æ—Ä—è–¥–æ–∫ —Å—Ç—Ä–æ–∫ –∏ –Ω–µ —É–¥–∞–ª—è–π –ª–∏—à–Ω–∏–µ –ø–µ—Ä–µ–Ω–æ—Å—ã, –∫—Ä–æ–º–µ —Ç–µ—Ö, —á—Ç–æ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ —É–¥–∞–ª—ë–Ω–Ω—ã–º —á–∞—Å—Ç—è–º —Ç–µ–∫—Å—Ç–∞.  
–ï—Å–ª–∏ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º —Ç–µ–∫—Å—Ç–µ –±—ã–ª –∞–±–∑–∞—Ü–Ω—ã–π –æ—Ç—Å—Ç—É–ø –∏–ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –º–µ–∂–¥—É –∞–±–∑–∞—Ü–∞–º–∏ ‚Äî –æ—Å—Ç–∞–≤—å –∏—Ö.  

–í –ø–æ–ª–µ "text" –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤—Å–µ—Ö –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫ (\n) –∫–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ.  


–í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–π –≤—Å–µ –∫–ª—é—á–∏: text, rate, deadline_date, deadline_time. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç ‚Äî —Å—Ç–∞–≤—å None.
–§–æ—Ä–º–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞: —Å–ª–æ–≤–∞—Ä—å –≤–∏–¥–∞:  
{
  "text": "<–æ—á–∏—â–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –≤–∞–∫–∞–Ω—Å–∏–∏>",
  "rate": "<—Å—Ç–∞–≤–∫–∞>",
  "deadline_date": "DD.MM.YYYY" –∏–ª–∏ None,  # –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ, –∏–Ω–∞—á–µ None
  "deadline_time": "HH:MM" –∏–ª–∏ None,       # –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ, –∏–Ω–∞—á–µ None
  "vacancy_id" : "vacancy_id",
  "vacancy_title" : "vacancy_title"
  
}
"""
        },
        {
            "role": "user",
            "text": text,
        },
    ]

    try:
        result = (sdk.models.completions("yandexgpt").configure(temperature=0.1).run_deferred(messages, timeout=180)).wait()
        clean_text = result.alternatives[0].text
        cleaned = clean_text.strip("` ")
        return ast.literal_eval(cleaned)
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∞–∫–∞–Ω—Å–∏–∏: {e}")
        return {'text': None, 'rate': None, 'deadline_date': None, 'deadline_time': None, 'vacancy_id': None, 'vacancy_title': None}

async def process_vacancy(text):
    """
    –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–∞–∫–∞–Ω—Å–∏–∏.
    """
    should_reject = await check_duration_and_deadline_gpt(text)

    if should_reject == '–î–ê':
        print("–ü—Ä–æ–µ–∫—Ç –æ—Ç—Å–µ—è–Ω. –í–æ–∑–≤—Ä–∞—â–∞–µ–º None.")
        return {'text': None, 'rate': None, 'deadline_date': None, 'deadline_time': None, 'vacancy_id': None, 'vacancy_title': None}
    else:
        print("–ü—Ä–æ–µ–∫—Ç –ø–æ–¥—Ö–æ–¥–∏—Ç. –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É.")
        return await del_contacts_gpt(text)

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
# async def main():
#     vacancy_text = """
#     –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ : –¥–æ 30.12.2025
#     üÜîBE-8632

#     –î–µ–¥–ª–∞–π–Ω –ø—Ä–∏–µ–º–∞ –∑–∞—è–≤–æ–∫: –¥–æ 30.09.2025

#     Java —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ c Camunda

#     –ú–µ—Å—è—á–Ω–∞—è —Å—Ç–∞–≤–∫–∞(–Ω–∞ —Ä—É–∫–∏) –¥–æ: 160 000 RUB

#     –û –∫–∞–Ω–¥–∏–¥–∞—Ç–µ:

#     –ì—Ä–µ–π–¥: Senior
#     –õ–æ–∫–∞—Ü–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞: –ª—é–±–∞—è
#     –¢–∞–π–º-–∑–æ–Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞: –º—Å–∫
#     –ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ: –ª—é–±–æ–µ

#     –û –ø—Ä–æ–µ–∫—Ç–µ:
#     –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:* –õ–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –¥–æ—Å—Ç–∞–≤–∫–æ–π –∑–∞–∫–∞–∑–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –ø–æ—Å—Ç–∞–º–∞—Ç—ã —Å–≤–æ–µ–π —Å–µ—Ç–∏.
#     –ö–æ–º–∞–Ω–¥–∞ RANDI —Å–æ–∑–¥–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤, –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É—é—Ç –æ–±—Ä–∞—â–µ–Ω–∏—è –æ—Ç –Ω–∞—à–∏—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –∏ –∫–ª–∏–µ–Ω—Ç–æ–≤.
#     –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π: Java 11-21, Spring (Boot, Core, Web, Data, Test), PostgreSQL, Hibernate, Kafka, Camunda BPM, ELK, GitLab CI, Docker/Kubernetes, Mockito.
#     –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–Ω–µ—á–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ –æ—Ç—Ä–∞—Å–ª—å: 5post
#     –î–∞—Ç–∞ —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞: ASAP
#     –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ:
#     –¢–∏–ø –∑–∞–Ω—è—Ç–æ—Å—Ç–∏: —É–¥–∞–ª—ë–Ω–∫–∞
#     –ó–∞–≥—Ä—É–∑–∫–∞: —Ñ—É–ª–ª-—Ç–∞–π–º
#     –û—Å–æ–±—ã–µ —É—Å–ª–æ–≤–∏—è:
#     –ö–∞–Ω–¥–∏–¥–∞—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏, –Ω–µ –Ω–∞ —Å—Ç–∞—Ä—Ç–∞–ø–µ.
#     –†–∞–±–æ—Ç–∞ —Å—Ç—Ä–æ–≥–æ –≤ –≥—Ä–∞—Ñ–∏–∫–µ —Å 9 –¥–æ 18 –ø–æ –ú–°–ö, –±–µ–∑ –≥–∏–±–∫–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ‚ùóÔ∏è
#     - –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ —Å–∏–º–∫–∞ —Å –†–æ—Å—Å–∏–π—Å–∫–∏–º –Ω–æ–º–µ—Ä–æ–º (+7...);
#     - –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ NDA –ø–æ —Ñ–æ—Ä–º–µ –∫–ª–∏–µ–Ω—Ç–∞;
#     - –ü—Ä–∏ –æ—Ç–∫–ª–∏–∫–µ –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é –ø—Ä–æ—Å—å–±–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –§–ò–û –∫–∞–Ω–¥–∏–¥–∞—Ç–∞.

#     –í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–∏—à–∏—Ç–µ –î–º–∏—Ç—Ä–∏—é ‚û°Ô∏è@Dimitryver. –£–∫–∞–∑–∞—Ç—å üÜî –∑–∞–ø—Ä–æ—Å–∞.

#     üìù–ü—Ä–∏—Å—ã–ª–∞—Ç—å –°V + –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–∞–Ω–¥–∏–¥–∞—Ç—É:
#     ‚óè –§–ò–û
#     ‚óè –°—Ç—Ä–∞–Ω–∞ + –ì–æ—Ä–æ–¥
#     ‚óè –ì—Ä–µ–π–¥
#     ‚óè –°—Ç–∞–≤–∫–∞
#     ‚óè –û—Ü–µ–Ω–∏—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –î–ê/–ù–ï–¢, –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –Ω–∞–ª–∏—á–∏–µ–º –æ–ø—ã—Ç–∞.Ô∏è

#     üìå –ó–∞–¥–∞—á–∏:
#     - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –æ—Ç–ª–∞–¥–∫–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π;
#     - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ unit-—Ç–µ—Å—Ç–æ–≤;
#     - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤–Ω—É—Ç—Ä–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –∞ —Ç–∞–∫–∂–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏;
#     - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ü–û —Å –ø–æ—Å—Ç–∞–º–∞—Ç–Ω—ã–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º;
#     - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞;
#     - Code Review.

#     üíª –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
#     - –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ NDA –ø–æ —Ñ–æ—Ä–º–µ –∫–ª–∏–µ–Ω—Ç–∞;
#     - –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ Java –æ—Ç 5+ –ª–µ—Ç; (–º–æ–∂–Ω–æ –º–µ–Ω—å—à–µ, –µ—Å–ª–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç –ø—Ä—è–º –∑–≤–µ–∑–¥–æ—á–∫–∞)
#     - –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å–æ Spring (Boot, Core, Web, Data, Test);
#     - –û–ø—ã—Ç —Å —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö PostgreSQL;
#     - –û–ø—ã—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º –º–µ—Å—Ç–µ —Ä–∞–±–æ—Ç—ã);
#     - –•–æ—Ä–æ—à–∏–µ –∑–Ω–∞–Ω–∏—è –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å Kafka;
#     - –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ —Ä–∞–±–æ—Ç—ã —Å Docker/Kubernetes;
#     - –û–ø—ã—Ç —Å –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞–º–∏, –¥–µ—Ñ–µ–∫—Ç–∞–º–∏ —Å –ø—Ä–æ–¥–∞;
#     - –ü–æ–Ω–∏–º–∞–Ω–∏–µ CI/CD;
#     - –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å JPA (Hibernate);
#     - –ó–Ω–∞–Ω–∏—è –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –æ–ø—ã—Ç —Å Camunda 7;
#     - –ë–∞–∑–æ–≤–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π Linux. –æ—Ç—Å—é–¥–∞
#     """
#     result = await process_vacancy(vacancy_text)
#     print(json.dumps(result, indent=2, ensure_ascii=False))

# if __name__ == "__main__":
#     import asyncio
#     asyncio.run(main())
