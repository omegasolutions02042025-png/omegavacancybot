#!/usr/bin/env python3

from __future__ import annotations

import ast
import os
import json

from yandex_cloud_ml_sdk import YCloudML
from dotenv import load_dotenv

load_dotenv()

AUTH_TOKEN = os.getenv('AUTH_TOKEN')
FOLDER_ID = os.getenv('FOLDER_ID')

sdk = YCloudML(
    folder_id=FOLDER_ID,
    auth=AUTH_TOKEN,
)

async def check_duration_gpt(text):
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—Å—Ç –≤–∞–∫–∞–Ω—Å–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç '–î–ê', –µ—Å–ª–∏ –µ–µ –Ω—É–∂–Ω–æ –æ—Ç—Å–µ—á—å –ø–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞,
    –∏ '–ù–ï–¢' –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ. –≠—Ç–æ—Ç –ø—Ä–æ–º—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –∑–∞–¥–∞—á—É.
    """
    messages = [
        {
            "role": "system",
            "text": """
            –ü—Ä–æ–≤–µ—Ä—å —Ç–µ–∫—Å—Ç –≤–∞–∫–∞–Ω—Å–∏–∏ –∏ –æ–ø—Ä–µ–¥–µ–ª–∏, –Ω—É–∂–Ω–æ –ª–∏ –æ—Ç—Å–µ—á—å –µ—ë –ø–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞.
            –ü—Ä–∞–≤–∏–ª–æ: –û—Ç—Å–µ—á—å, –µ—Å–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞ 3 –º–µ—Å—è—Ü–∞–º. –ò–≥–Ω–æ—Ä–∏—Ä—É–π –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ —Ñ—Ä–∞–∑—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä "–æ—Ç 3—Ö –º–µ—Å—è—Ü–µ–≤" –∏–ª–∏ "—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–¥–ª–µ–Ω–∏—è".
            –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç—Å–µ—á—å, –≤–µ—Ä–Ω–∏ —Å–ª–æ–≤–æ "–î–ê". –ï—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–æ –æ—Ç—Å–µ—á—å, –≤–µ—Ä–Ω–∏ —Å–ª–æ–≤–æ "–ù–ï–¢". –ù–µ –¥–æ–±–∞–≤–ª—è–π –Ω–∏–∫–∞–∫–∏—Ö –¥—Ä—É–≥–∏—Ö —Å–ª–æ–≤ –∏ –∑–Ω–∞–∫–æ–≤.
            """
        },
        {
            "role": "user",
            "text": text,
        },
    ]

    try:
        result = (sdk.models.completions("yandexgpt").configure(temperature=0.1).run_deferred(messages, timeout=60)).wait()
        return result.alternatives[0].text.strip()
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: {e}")
        return "–ù–ï–¢" # –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª—É—á—à–µ –Ω–µ –æ—Ç—Å–µ–∫–∞—Ç—å

async def del_contacts_gpt(text):
    """
    –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ –≤–∞–∫–∞–Ω—Å–∏–∏.
    –í—ã–ø–æ–ª–Ω—è–µ—Ç –æ—á–∏—Å—Ç–∫—É, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.
    –≠—Ç–æ—Ç –ø—Ä–æ–º—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª–∞ –æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–æ —É–∂–µ –±—ã–ª–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ.
    """
    messages = [
        {
            "role": "system",
            "text": """
–¢—ã ‚Äî —Ñ–∏–ª—å—Ç—Ä –≤–∞–∫–∞–Ω—Å–∏–π. –ù–∞ –≤—Ö–æ–¥ –ø—Ä–∏—Ö–æ–¥–∏—Ç –¢–ï–ö–°–¢ –í–ê–ö–ê–ù–°–ò–ò. –†–∞–±–æ—Ç–∞–π —Å—Ç—Ä–æ–≥–æ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –Ω–∏–∂–µ.
–ò—Å–ø–æ–ª—å–∑—É–π –ª–æ–≥–∏–∫—É –ò (AND) –º–µ–∂–¥—É —Ä–∞–∑–¥–µ–ª–∞–º–∏. –ü—Ä–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è—Ö –≤—ã–±–∏—Ä–∞–π –û–¢–°–ï–ß–¨.

–ü—Ä–∞–≤–∏–ª–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:
- –ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –∑–∞–ø—Ä–µ—â–∞—é—â–µ–µ —É—Å–ª–æ–≤–∏–µ ‚Äî –≤–∞–∫–∞–Ω—Å–∏—è –û–¢–°–ï–ö–ê–ï–¢–°–Ø, –¥–∞–∂–µ –µ—Å–ª–∏ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è —Ä–∞–∑—Ä–µ—à–∞—é—â–∏–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏.

–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–æ–≤:
- –†–ë ‚â° –ë–µ–ª–∞—Ä—É—Å—å ‚â° Belarus ‚â° BY ‚â° –≤ –†–ë
- –†–§ ‚â° –†–æ—Å—Å–∏—è ‚â° Russian Federation ‚â° Russia ‚â° RU ‚â° –≤ –†–§
- –ì–æ—Ä–æ–¥–∞ –†–ë: –ú–∏–Ω—Å–∫, –ë—Ä–µ—Å—Ç, –í–∏—Ç–µ–±—Å–∫, –ì–æ–º–µ–ª—å, –ì—Ä–æ–¥–Ω–æ, –ú–æ–≥–∏–ª—ë–≤ (–ª—é–±—ã–µ –ø–∞–¥–µ–∂–∏)
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–∏ –†–§ (–ª–æ–∫–∞—Ü–∏—è): "—Ç–æ–ª—å–∫–æ –†–§", "–∏–∑ –†–§", "–Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –†–§", "–∂–∏—Ç–µ–ª–∏ –†–§",
  "—Ä–∞–±–æ—Ç–∞ –∏–∑ –ª—é–±–æ–π —Ç–æ—á–∫–∏ –†–§", "–ª–æ–∫: –†–§", "–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –≤ –†–§"
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–∏ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–∞ –†–§: "—Ç–æ–ª—å–∫–æ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ –†–§", "–ø–∞—Å–ø–æ—Ä—Ç –†–§ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",
  "–Ω–∞–ª–æ–≥–æ–≤–æ–µ —Ä–µ–∑–∏–¥–µ–Ω—Ç—Å—Ç–≤–æ –†–§ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ", "—Ç–æ–ª—å–∫–æ –≥—Ä–∞–∂–¥–∞–Ω–µ –†–§", "—Ç–æ–ª—å–∫–æ —Ä–æ—Å—Å–∏—è–Ω–µ"


**–ö–†–ò–¢–ï–†–ò–ò –§–ò–õ–¨–¢–†–ê–¶–ò–ò (–ë–ï–ó –£–ß–ï–¢–ê –ü–†–û–î–û–õ–ñ–ò–¢–ï–õ–¨–ù–û–°–¢–ò):**
* **–í–ê–ö–ê–ù–°–ò–Ø –û–¢–°–ï–ö–ê–ï–¢–°–Ø (–í–ï–†–ù–ò None), –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –∏–∑ —ç—Ç–∏—Ö —É—Å–ª–æ–≤–∏–π:**
    * **–õ–æ–∫–∞—Ü–∏—è:** –¢–æ–ª—å–∫–æ –†–§/–†–æ—Å—Å–∏—è –∏–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–∏ –†–§.
    * **–ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ:** –¢–æ–ª—å–∫–æ –†–§/–†–æ—Å—Å–∏—è –∏–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–∏ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–∞ –†–§.
    * **–û–ø–ª–∞—Ç–∞:** –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –æ—Ç—Å—Ä–æ—á–∫–∞ –æ–ø–ª–∞—Ç—ã (>35 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π –ò–õ–ò >50 –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã—Ö –¥–Ω–µ–π) –ò–õ–ò –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è —Ñ—Ä–∞–∑—ã: "–∞–∫—Ç—ã –ø–æ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ", "–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ–µ –∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ", "–ø–æ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞", "–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ", '–ø–æ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ', '–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞', '–ø–æ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–∞—è'.
    * **–û–ø–ª–∞—Ç–∞:** –í —Ç–µ–∫—Å—Ç–µ –µ—Å—Ç—å "—Å—Ç–æ–ø"/"–°–¢–û–ü".
    * **–î–µ–¥–ª–∞–π–Ω:** –î–∞—Ç–∞/–≤—Ä–µ–º—è –ø–æ–¥–∞—á–∏ —Ä–µ–∑—é–º–µ –≤ –ø—Ä–æ—à–ª–æ–º –∏–ª–∏ —Å–µ–≥–æ–¥–Ω—è.

* **–í–ê–ö–ê–ù–°–ò–Ø –ü–†–û–•–û–î–ò–¢, –µ—Å–ª–∏ –í–°–ï –∏–∑ —ç—Ç–∏—Ö —É—Å–ª–æ–≤–∏–π –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è:**
    * **–õ–æ–∫–∞—Ü–∏—è:** –Ø–≤–Ω–æ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –†–ë/–ë–µ–ª–∞—Ä—É—Å—å, —É–∫–∞–∑–∞–Ω –≥–æ—Ä–æ–¥ –†–ë, –ò–õ–ò —É–∫–∞–∑–∞–Ω–æ "—É–¥–∞–ª—ë–Ω–Ω–æ/–ª—é–±–∞—è –ª–æ–∫–∞—Ü–∏—è/–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π" (–∏ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–µ–π –†–§).
    * **–ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ:** –î–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ –†–ë, –ò–õ–ò "–ª—é–±–æ–π/–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π", –ò–õ–ò –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã –° –Ø–í–ù–´–ú —É–∫–∞–∑–∞–Ω–∏–µ–º –ë–µ–ª–∞—Ä—É—Å–∏/–†–ë.
    

**–î–µ–π—Å—Ç–≤–∏—è —Å —Ç–µ–∫—Å—Ç–æ–º (–≤—ã–ø–æ–ª–Ω—è–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ):**
A) –ü–æ–ª–Ω–æ—Å—Ç—å—é –£–î–ê–õ–ò –∏–∑ —Ç–µ–∫—Å—Ç–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–± —É—Å–ª–æ–≤–∏—è—Ö –æ–ø–ª–∞—Ç—ã.
B) –ó–ê–ú–ï–ù–ò –ø–æ–¥–ø–∏—Å–∏ –≤–∏–¥–∞: "–í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è ‚û°Ô∏è@username –∏–ª–∏ –≤ –æ–±—â–∏–π —á–∞—Ç. –£–∫–∞–∑–∞—Ç—å üÜî –∑–∞–ø—Ä–æ—Å–∞." –Ω–∞: "–í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–∏—à–∏—Ç–µ –î–º–∏—Ç—Ä–∏—é ‚û°Ô∏è@Dimitryver. –£–∫–∞–∑–∞—Ç—å üÜî –∑–∞–ø—Ä–æ—Å–∞." –£—á—Ç–∏, —á—Ç–æ @username –∏ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è.
C) –£–î–ê–õ–ò –≤—Å–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã (email, —Ç–µ–ª–µ—Ñ–æ–Ω, —Å—Å—ã–ª–∫–∏, —Ç–µ–ª–µ–≥—Ä–∞–º).
D) –ï—Å–ª–∏ –≤ –Ω–∞—á–∞–ª–µ –µ—Å—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤–∞–∫–∞–Ω—Å–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "ü•á Java —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ c Camunda"), –£–î–ê–õ–ò –µ–≥–æ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –∏ –≤–µ—Ä–Ω–∏ –≤ –∫–ª—é—á "vacancy_title" (–±–µ–∑ —ç–º–æ–¥–∑–∏ –∏ –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤).
E) –ù–∞–π–¥–∏ –ø–µ—Ä–≤—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–∞–∫–∞–Ω—Å–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∞:
   1) "üÜî XX-1234" (XX ‚Äî –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –∑–∞–≥–ª–∞–≤–Ω—ã–µ, 1234 ‚Äî —Ü–∏—Ñ—Ä—ã)
   2) "üÜî 8581" (—Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)
   ‚Äî –£–î–ê–õ–ò –µ–≥–æ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –∏ –≤–µ—Ä–Ω–∏ –∫–∞–∫ "vacancy_id" (–±–µ–∑ —Å–∏–º–≤–æ–ª–∞ üÜî). –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî None.
F) –ù–∞–π–¥–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∞–π —Å—Ç–∞–≤–∫—É –∏–ª–∏ —Å—Ç–∞–≤–∫—É –∑–∞–∫—É–ø–∫–∏ –≤ —Ç–µ–∫—Å—Ç–µ. –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã –¥–≤–µ —Å—Ç–∞–≤–∫–∏ ‚Äî –¥–ª—è –†–§ –∏ –¥–ª—è –Ω–µ –†–§ ‚Äî –≤–æ–∑—å–º–∏ —Å—Ç–∞–≤–∫—É –¥–ª—è –Ω–µ –†–§. –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ —Å—Ç–∞–≤–∫–∞ ‚Äî –≤–µ—Ä–Ω–∏ –µ—ë. –í–µ—Ä–Ω–∏ —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ, –±–µ–∑ –≤–∞–ª—é—Ç, —Å–ª–æ–≤ –∏ —Å–∏–º–≤–æ–ª–æ–≤ (/, ~, –æ—Ç). –ï—Å–ª–∏ —Å—Ç–∞–≤–∫–∏ –Ω–µ—Ç ("—Å–º–æ—Ç—Ä–∏–º –≤–∞—à—É" –∏ —Ç.–ø.) ‚Äî –≤–µ—Ä–Ω–∏ "rate": 0. –£–¥–∞–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å—Ç–∞–≤–∫–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞.
G) –î–ª—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π: –û–±—ä–µ–¥–∏–Ω–∏ –≤—Å–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ –≤—Ä–æ–¥–µ "‚ûï –ë—É–¥–µ—Ç –ø–ª—é—Å–æ–º:" –∏–ª–∏ "‚ûï –ë—É–¥–µ—Ç –±–æ–ª—å—à–∏–º –ø–ª—é—Å–æ–º:" —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ ("–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è", "–û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è", "–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è"). –°–æ—Ö—Ä–∞–Ω—è–π –ø—Ä–∏ —ç—Ç–æ–º –≤—Å–µ –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. –§—Ä–∞–∑—ã –∏–∑ "–ë—É–¥–µ—Ç –ø–ª—é—Å–æ–º" –¥–æ–ª–∂–Ω—ã –Ω–µ –≤—ã–¥–µ–ª—è—Ç—å—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ, –∞ –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –≤ –∫–æ–Ω–µ—Ü –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.
H) –°–æ—Ö—Ä–∞–Ω–∏ –í–°–ï –∏—Å—Ö–æ–¥–Ω—ã–µ –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ –∏ –∞–±–∑–∞—Ü—ã, –ø–æ—Ä—è–¥–æ–∫ —Å—Ç—Ä–æ–∫, –∫—Ä–æ–º–µ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö —á–∞—Å—Ç–µ–π.

**–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê:**
–°—Ç—Ä–æ–≥–æ —Å–ª–æ–≤–∞—Ä—å:
{
  "text": "<–æ—á–∏—â–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –≤–∞–∫–∞–Ω—Å–∏–∏>",
  "rate": "<—á–∏—Å–ª–æ –∏–ª–∏ 0>",
  "deadline_date": "DD.MM.YYYY" –∏–ª–∏ None,
  "deadline_time": "HH:MM" –∏–ª–∏ None,
  "vacancy_id": "<id –∏–ª–∏ None>",
  "vacancy_title": "<–∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏–ª–∏ None>"
}
"""
        },
        {
            "role": "user",
            "text": text,
        },
    ]

    try:
        result = (sdk.models.completions("yandexgpt").configure(temperature=0.5).run_deferred(messages, timeout=180)).wait()
        clean_text = result.alternatives[0].text
        cleaned = clean_text.strip("`\n '")
        return ast.literal_eval(cleaned)
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∞–∫–∞–Ω—Å–∏–∏: {e}")
        return {'text': None, 'rate': None, 'deadline_date': None, 'deadline_time': None, 'vacancy_id': None, 'vacancy_title': None}

async def process_vacancy(text):
    """
    –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–∞–∫–∞–Ω—Å–∏–∏.
    """
    # –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
    should_reject = await check_duration_gpt(text)

    if should_reject == '–î–ê':
        print("–ü—Ä–æ–µ–∫—Ç –æ—Ç—Å–µ—è–Ω –ø–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –í–æ–∑–≤—Ä–∞—â–∞–µ–º None.")
        return {'text': None, 'rate': None, 'deadline_date': None, 'deadline_time': None, 'vacancy_id': None, 'vacancy_title': None}
    else:
        # –®–∞–≥ 2: –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞, –∑–∞–ø—É—Å–∫–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
        print("–ü—Ä–æ–µ–∫—Ç –ø–æ–¥—Ö–æ–¥–∏—Ç –ø–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É.")
        return await del_contacts_gpt(text)

